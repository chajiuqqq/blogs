<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML templateé‡Œçš„åŠ¨ä½œ 1. æ¡ä»¶åŠ¨ä½œ 2. è¿­ä»£åŠ¨ä½œ 3. è®¾ç½®åŠ¨ä½œ 4. åŒ…å«åŠ¨ä½œ å‚æ•° å˜é‡ ç®¡é“ å‡½æ•° ä¸Šä¸‹æ–‡æ„ŸçŸ¥ å–æ¶ˆHTMLè½¬ä¹‰ åµŒå¥—æ¨¡æ¿"><title>Golangä¸­çš„Templateæ¨¡æ¿å¼•æ“</title><link rel=canonical href=https://chajiuqqq.github.io/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/><link rel=stylesheet href=/blogs/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css><meta property="og:title" content="Golangä¸­çš„Templateæ¨¡æ¿å¼•æ“"><meta property="og:description" content="å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML templateé‡Œçš„åŠ¨ä½œ 1. æ¡ä»¶åŠ¨ä½œ 2. è¿­ä»£åŠ¨ä½œ 3. è®¾ç½®åŠ¨ä½œ 4. åŒ…å«åŠ¨ä½œ å‚æ•° å˜é‡ ç®¡é“ å‡½æ•° ä¸Šä¸‹æ–‡æ„ŸçŸ¥ å–æ¶ˆHTMLè½¬ä¹‰ åµŒå¥—æ¨¡æ¿"><meta property="og:url" content="https://chajiuqqq.github.io/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/"><meta property="og:site_name" content="èŒ¶é…’çš„å°ç«™"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="go-web"><meta property="article:published_time" content="2023-02-23T15:24:58+08:00"><meta property="article:modified_time" content="2023-02-23T15:24:58+08:00"><meta name=twitter:title content="Golangä¸­çš„Templateæ¨¡æ¿å¼•æ“"><meta name=twitter:description content="å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML templateé‡Œçš„åŠ¨ä½œ 1. æ¡ä»¶åŠ¨ä½œ 2. è¿­ä»£åŠ¨ä½œ 3. è®¾ç½®åŠ¨ä½œ 4. åŒ…å«åŠ¨ä½œ å‚æ•° å˜é‡ ç®¡é“ å‡½æ•° ä¸Šä¸‹æ–‡æ„ŸçŸ¥ å–æ¶ˆHTMLè½¬ä¹‰ åµŒå¥—æ¨¡æ¿"><script async src="https://www.googletagmanager.com/gtag/js?id=G-BCR6BTPPNW"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BCR6BTPPNW",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/blogs/><img src=/blogs/img/avatar_hu4031dbb736a187d9130ab1a88d3b3ee1_9967_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/blogs>èŒ¶é…’çš„å°ç«™</a></h1><h2 class=site-description>ä¸€ä¸ªå¹´è½»çš„å°ç«™</h2></div></header><ol class=social-menu><li><a href=https://github.com/chajiuqqq target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blogs/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>ä¸»é¡µ</span></a></li><li><a href=/blogs/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>å…³äº</span></a></li><li><a href=/blogs/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/blogs/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/blogs/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://chajiuqqq.github.io/blogs/en/>English</option><option value=https://chajiuqqq.github.io/blogs/ selected>ä¸­æ–‡</option><option value=https://chajiuqqq.github.io/blogs/ar/>Ø¹Ø±Ø¨ÙŠ</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blogs/categories/golang/>golang</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/>Golangä¸­çš„Templateæ¨¡æ¿å¼•æ“</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2023-02-23 15:24</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><ul><li><a class=link href=#%e5%a6%82%e4%bd%95%e8%af%bb%e5%8f%96%e6%a8%a1%e7%89%88%e5%b9%b6%e8%bf%94%e5%9b%9ehtml>å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML</a></li><li><a class=link href=#template%e9%87%8c%e7%9a%84%e5%8a%a8%e4%bd%9c>templateé‡Œçš„åŠ¨ä½œ</a><ul><li><a class=link href=#1-%e6%9d%a1%e4%bb%b6%e5%8a%a8%e4%bd%9c>1. æ¡ä»¶åŠ¨ä½œ</a></li><li><a class=link href=#2-%e8%bf%ad%e4%bb%a3%e5%8a%a8%e4%bd%9c>2. è¿­ä»£åŠ¨ä½œ</a></li><li><a class=link href=#3-%e8%ae%be%e7%bd%ae%e5%8a%a8%e4%bd%9c>3. è®¾ç½®åŠ¨ä½œ</a></li><li><a class=link href=#4-%e5%8c%85%e5%90%ab%e5%8a%a8%e4%bd%9c>4. åŒ…å«åŠ¨ä½œ</a></li></ul></li><li><a class=link href=#%e5%8f%82%e6%95%b0>å‚æ•°</a></li><li><a class=link href=#%e5%8f%98%e9%87%8f>å˜é‡</a></li><li><a class=link href=#%e7%ae%a1%e9%81%93>ç®¡é“</a></li><li><a class=link href=#%e5%87%bd%e6%95%b0>å‡½æ•°</a></li><li><a class=link href=#%e4%b8%8a%e4%b8%8b%e6%96%87%e6%84%9f%e7%9f%a5>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</a><ul><li><a class=link href=#%e5%8f%96%e6%b6%88html%e8%bd%ac%e4%b9%89>å–æ¶ˆHTMLè½¬ä¹‰</a></li></ul></li><li><a class=link href=#%e5%b5%8c%e5%a5%97%e6%a8%a1%e6%9d%bf>åµŒå¥—æ¨¡æ¿</a><ul><li><a class=link href=#%e5%9d%97%e6%a8%a1%e6%9d%bf>å—æ¨¡æ¿</a></li></ul></li></ul><h1 id=å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›html>å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML</h1><p>æ¨¡ç‰ˆä¸­çš„åŠ¨ä½œé»˜è®¤ä½¿ç”¨{{å’Œ}}åŒ…å›´ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œä¿®æ”¹ç•Œå®šç¬¦ã€‚<code>{{.}}</code>æŒ‡çš„æ˜¯ç”¨ä¼ å…¥çš„å€¼æ›¿æ¢è¿™ä¸ªåŠ¨ä½œæœ¬èº«ã€‚</p><p>go webçš„æ¨¡ç‰ˆå¼•æ“ä½¿ç”¨æ–¹æ³•åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li>è¯»å–æ–‡æœ¬æ¨¡ç‰ˆæ–‡ä»¶ï¼ˆæˆ–ä¸€ä¸ªæ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼‰ï¼Œè¿›è¡Œè¯­æ³•åˆ†æï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡ç‰ˆç»“æ„ã€‚</li><li>å°†æ•°æ®ä¼ å…¥ï¼Œæ‰§è¡Œæ¨¡ç‰ˆï¼Œç”ŸæˆHTMLã€‚</li></ul><p>ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼š</p><pre><code>//ä»æ–‡ä»¶ä¸­ç”Ÿæˆæ¨¡ç‰ˆ
t,_ := template.ParseFiles(&quot;index.html&quot;)

//è¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯åªç”Ÿæˆç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ¨¡æ¿ï¼ˆå› ä¸ºç¬¬ä¸€ä¸ªæ¨¡ç‰ˆå¯èƒ½è°ƒç”¨å…¶ä»–æ¨¡ç‰ˆï¼‰
t,_ := template.ParseFiles(&quot;index.html&quot;,&quot;content.html&quot;,&quot;navbar.html&quot;)

//ä»å­—ç¬¦ä¸²ä¸­ç”Ÿæˆæ¨¡ç‰ˆ
tmpl := `...`
t := template.New(&quot;tmpl.html&quot;)
t,_ = t.Parse(tmpl)
</code></pre><p>ç¬¬äºŒä¸ªæ­¥éª¤ï¼š</p><pre><code>// t.Executeç¬¬ä¸€ä¸ªå‚æ•°æ˜¯io.Writerï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ å…¥çš„æ•°æ®ã€‚è¿™ä¸ªæ–¹æ³•åªä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªæ¨¡ç‰ˆï¼Œä¹Ÿå°±æ˜¯index.html
t,_ := template.ParseFiles(&quot;index.html&quot;,&quot;content.html&quot;,&quot;navbar.html&quot;)
t.Execute(w,&quot;hello world&quot;)

//å¦‚æœæƒ³è¦æ‰§è¡Œå…¶ä»–æ¨¡æ¿ï¼Œç”¨t.ExecuteTemplate,å¹¶åœ¨ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šæ¨¡ç‰ˆåç§°
t,_ := template.ParseFiles(&quot;index.html&quot;,&quot;content.html&quot;,&quot;navbar.html&quot;)
t.ExecuteTemplate(w,&quot;content.html&quot;,&quot;hello world&quot;)
</code></pre><p>å¦‚æœä½ åªæ˜¯åœ¨htmlä¸­åŠ å…¥ä¸€äº›{{.}}çš„æŒ‡ä»¤ï¼Œæ¨¡æ¿çš„åç§°å’Œæ–‡ä»¶åç§°ä¸€æ ·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰æ¨¡ç‰ˆçš„åå­—ï¼Œæˆ–åœ¨ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªæ¨¡æ¿ã€‚</p><p>æ³¨æ„ä¼ å…¥çš„æ•°æ®å»ºè®®æ˜¯æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯åŠ ä¸Šæ•°æ®çš„å¼•ç”¨ã€‚å¹¶ä¸”åœ¨tmplé‡Œè°ƒç”¨funcæ—¶ï¼Œä¸ä¼šè‡ªåŠ¨æŠŠx.fieldè½¬ä¸º(&x).fieldï¼Œæ‰€ä»¥å¦‚æœä½ å®šäº†ä¸€ä¸ªç»“æ„çš„æŒ‡é’ˆæ¥å—è€…æ–¹æ³•ï¼Œè€Œä¼ å…¥tmplä¸€ä¸ªå€¼çš„æ•°æ®ï¼Œé‚£ä¹ˆæ— æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¼šæç¤ºåœ¨è¯¥ç±»å‹ä¸­æ‰¾ä¸åˆ°è¯¥æ–¹æ³•ã€‚</p><pre><code>//t.ExecuteTemplate(w,&quot;content.html&quot;,Thread{})
t.ExecuteTemplate(w,&quot;content.html&quot;,&amp;Thread{})
</code></pre><p>å†…åµŒçš„fieldå¯ä»¥ç›´æ¥é€šè¿‡.è°ƒç”¨ï¼Œæ¯”å¦‚å®šä¹‰Peopleå’ŒUserï¼š</p><pre><code>type People struct{
    Name string
}

type User struct{
    People
    Username string
    Pwd string
}
</code></pre><p>åœ¨tmplä¸­ï¼Œä¼ å…¥userï¼Œå¦‚æœç›´æ¥ {{.Name}}æ˜¯å¯ä»¥è·å–çš„ã€‚</p><p><strong>è®²äº†è¿™ä¹ˆå¤šè¿˜ä¸çŸ¥é“æ¨¡ç‰ˆæ–‡ä»¶æ€ä¹ˆå†™å‘¢ã€‚ä¸‹é¢è®²è®²åŠ¨ä½œè¯­æ³•ã€‚</strong></p><h1 id=templateé‡Œçš„åŠ¨ä½œ>templateé‡Œçš„åŠ¨ä½œ</h1><p>å¦‚æœè¦è®¿é—®ç»“æ„é‡Œçš„fieldï¼Œç”¨ï¼š<code>{{ .Name }}</code>ï¼Œæˆ– <code>{{ .User.Name }}</code></p><h2 id=1-æ¡ä»¶åŠ¨ä½œ>1. æ¡ä»¶åŠ¨ä½œ</h2><p>æ¥å—trueæˆ–falseï¼Œä»è€Œå†³å®šæ‰§è¡Œï¼ˆæ˜¾ç¤ºï¼‰å“ªæ¡è¯­å¥ã€‚ä¸‹é¢å¦‚æœä¼ å…¥trueï¼Œåˆ™ä¼šæ˜¾ç¤ºcontent1è¯­å¥ã€‚</p><pre><code>{{ if . }}
    content1
{{ else }}
    content2
{{ end }}
</code></pre><h2 id=2-è¿­ä»£åŠ¨ä½œ>2. è¿­ä»£åŠ¨ä½œ</h2><p>å¯å¯¹ä¼ å…¥çš„æ•°ç»„ã€åˆ‡ç‰‡ã€æ˜ å°„ã€æˆ–é€šé“è¿›è¡Œè¿­ä»£ï¼Œè¿­ä»£é‡Œï¼Œ<code>.</code>ä¼šè¢«è®¾ç½®ä¸ºå½“å‰è¿­ä»£çš„å…ƒç´ .<code>else</code>ç”¨äºå½“è¿­ä»£çš„ç»“æ„ä¸ºç©ºæˆ–nilæ—¶æ˜¾ç¤ºå¤‡é€‰ç»“æœã€‚</p><pre><code>{{ range . }}
    &lt;li&gt;The Elem: {{ . }} &lt;/li&gt;
{{ end }}

{{ range . }}
    &lt;li&gt;The Elem: {{ . }} &lt;/li&gt;
{{ else }}
    &lt;li&gt; No elems. &lt;/li&gt;
{{ end }}
</code></pre><h2 id=3-è®¾ç½®åŠ¨ä½œ>3. è®¾ç½®åŠ¨ä½œ</h2><p>ç±»ä¼¼ifï¼Œ<code>{{if pipeline}} T1 {{end}}</code>,å¦‚æœpipelineä¸ºç©ºï¼ˆfalseï¼Œ0ï¼Œnilï¼Œç©ºçš„array, slice, map,stringï¼‰ï¼Œåˆ™æ‰§è¡ŒT0ï¼Œå¦åˆ™æ‰§è¡ŒT1.åŒæ—¶withé‡Œé¢{{.}}ä¼šè¢«è®¾ç½®ä¸ºpipelineçš„å€¼ã€‚è¿™æ˜¯å’Œifå”¯ä¸€çš„åŒºåˆ«ã€‚</p><pre><code>{{with pipeline}} T1 {{end}}
{{with pipeline}} T1 {{else}} T0 {{end}}
</code></pre><p>å¯ä»¥ç”¨æ¥åˆ¤æ–­å½“æŸä¸ªé›†åˆä¸ºç©ºæ—¶ï¼Œæ˜¾ç¤ºxxxè¯ã€‚å½“ä¸ä¸ºç©ºæ—¶ï¼Œåœ¨withé‡Œç”¨dotæ˜¾ç¤ºè¿™ä¸ªé›†åˆé‡Œçš„ä¸œè¥¿ã€‚</p><h2 id=4-åŒ…å«åŠ¨ä½œ>4. åŒ…å«åŠ¨ä½œ</h2><p>å¯ä»¥åœ¨ä¸€ä¸ªæ¨¡æ¿é‡ŒåŒ…å«å¦ä¸€ä¸ªæ¨¡æ¿ï¼Œç”¨åˆ°<code>{{ template "name" }}</code>,æˆ–<code>{{template "name" pipeline}}</code></p><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨¡æ¿çš„åå­—ï¼ˆå¦‚æœæ²¡å®šä¹‰ï¼Œé‚£å°±æ˜¯æ¨¡æ¿æ–‡ä»¶åç§°ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¼ ç»™è¿™ä¸‹ä¸€ä¸ªæ¨¡æ¿çš„å‚æ•°ã€‚</p><p>é€šå¸¸è¿™ä¹ˆç”¨ï¼š<code>{{template "name" . }}</code></p><h1 id=å‚æ•°>å‚æ•°</h1><p>ä¸Šè¿°çš„ifåè¾¹è·Ÿçš„å°±æ˜¯argå‚æ•°ï¼Œè¿™è¾¹ä¼ äº†dotè¿‡å»ã€‚</p><pre><code>{{ if . }}
    content1
{{ else }}
    content2
{{ end }}
</code></pre><p>argå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¸€ä¸ªå˜é‡ï¼Œæˆ–ä¸€ä¸ªè¿”å›ä¸€ä¸ªå€¼çš„å‡½æ•°ã€‚</p><p>å¦‚ï¼š</p><pre><code>{{ if . }} content1 {{ end }}
{{ if $key }} content1 {{ end }}
{{ if .IsExist }} content1 {{ end }}
</code></pre><h1 id=å˜é‡>å˜é‡</h1><p>å¯ä»¥åœ¨åŠ¨ä½œä¸­è®¾ç½®å˜é‡ï¼š<code>$key := something</code>,å¦‚ï¼š</p><pre><code>{{ range $key, $value := . }}
    &lt;li&gt;{{ $key }} : {{ $value }} &lt;/li&gt;
{{ end }}
</code></pre><h1 id=ç®¡é“>ç®¡é“</h1><p>ç®¡é“å¯ä»¥ä¸²è”å‚æ•°å’Œå‡½æ•°ã€æ–¹æ³•ã€‚å¦‚</p><pre><code>{{ p1 | p2 | p3 }}
</code></pre><p>è¿™ä¸‰è€…éƒ½æ˜¯å‚æ•°ã€‚</p><pre><code>{{ 123.456 | printf &quot;%.2f&quot; }}
</code></pre><p>å°†123.456ä¼ ç»™<strong>æ¨¡æ¿å†…ç½®printfå‡½æ•°</strong></p><p>å½“ç„¶å‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡åç½®å‚æ•°è°ƒç”¨ï¼š</p><pre><code>{{ printf &quot;%.2f&quot; 123.456 }}
</code></pre><h1 id=å‡½æ•°>å‡½æ•°</h1><p>æ¨¡æ¿å¼•æ“é‡Œçš„å†…ç½®å‡½æ•°è™½ç„¶å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œä½†æ˜¯åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œæˆ–è¿”å›ä¸€ä¸ªå€¼+ä¸€ä¸ªé”™è¯¯ã€‚å†…ç½®å‡½æ•°åˆ—è¡¨è§ <a class=link href=https://pkg.go.dev/text/template#hdr-Functions target=_blank rel=noopener>https://pkg.go.dev/text/template#hdr-Functions</a></p><p>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å‡½æ•°å¹¶ä¼ å…¥æ¨¡æ¿ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªFuncMapï¼Œå¹¶ä¼ å…¥<code>å‡½æ•°åç§°ï¼šçœŸçš„å‡½æ•°å</code>ï¼Œåé¢æ¨¡æ¿é‡Œå°±ç”¨å‡½æ•°åç§°è¿›è¡Œè°ƒç”¨</li><li>å°†FuncMapå’Œæ¨¡æ¿ç»‘å®š</li></ol><p><img src=/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/1.png width=1000 height=430 srcset="/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/1_huef1bbdaf32f80678fafa93f55074d365_190394_480x0_resize_box_3.png 480w, /blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/1_huef1bbdaf32f80678fafa93f55074d365_190394_1024x0_resize_box_3.png 1024w" loading=lazy alt="Alt text" class=gallery-image data-flex-grow=232 data-flex-basis=558px></p><p>è°ƒç”¨ï¼š</p><pre><code>{{ . | fdate }}
æˆ–
{{ fdate . }}
</code></pre><p>è¿˜æœ‰äº›å‚æ•°ã€å˜é‡ã€ç®¡é“å’Œå‡½æ•°è¿™é‡Œå…ˆç•¥è¿‡ã€‚</p><h1 id=ä¸Šä¸‹æ–‡æ„ŸçŸ¥>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</h1><p>goæ¨¡æ¿é‡ŒåŠ¨ä½œçš„è¾“å‡ºä¼šæ ¹æ®æ‰€å¤„çš„ä¸Šä¸‹æ–‡æ”¹å˜è¾“å‡ºå½¢æ€ï¼Œå¦‚</p><ul><li>{{ . }}åœ¨HTMLå¤„ï¼Œä¼šå°†è¾“å‡ºè¿›è¡Œhtmlè½¬è¯‘åè¾“å‡º</li><li>{{ . }}åœ¨hrefæˆ–srcå¤„ï¼Œä¼šå°†è¾“å‡ºè¿›è¡ŒURLè½¬è¯‘åè¾“å‡º</li></ul><p><img src=/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/2.png width=1536 height=426 srcset="/blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/2_hu7ca5a1e6d4d0f62c5bd7a77332d8f790_495731_480x0_resize_box_3.png 480w, /blogs/p/golang%E4%B8%AD%E7%9A%84template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/2_hu7ca5a1e6d4d0f62c5bd7a77332d8f790_495731_1024x0_resize_box_3.png 1024w" loading=lazy alt="Alt text" class=gallery-image data-flex-grow=360 data-flex-basis=865px></p><p>è¿™ä¸»è¦ç”¨äºå®ç°è‡ªåŠ¨é˜²å¾¡ç¼–ç¨‹ï¼Œå¯ä»¥æŠµå¾¡XSSæ”»å‡»ã€‚</p><h2 id=å–æ¶ˆhtmlè½¬ä¹‰>å–æ¶ˆHTMLè½¬ä¹‰</h2><p>ä½¿ç”¨<code>template.HTML()</code>åŒ…è£¹å€¼å¹¶ä¼ å…¥æ¨¡æ¿å³å¯ã€‚å¦‚<code>template.HTML(r.FormValue("comment"))</code></p><h1 id=åµŒå¥—æ¨¡æ¿>åµŒå¥—æ¨¡æ¿</h1><p>é€šå¸¸æˆ‘ä»¬ä¼šåœ¨ç½‘ç«™å¼€å‘ä¸­å¤ç”¨æŸå¥—layoutï¼Œå¦‚æœ‰å¯¼èˆªæ ï¼ŒæœåŠ¡å™¨çŠ¶æ€ï¼Œç‰ˆæƒå£°æ˜ã€‚ç„¶åä¸­é—´æ˜¯å±•ç¤ºçš„å†…å®¹ã€‚å¦‚æœè¦å®ç°å†…å®¹æ›¿æ¢è€Œå…¶ä»–ä¸œè¥¿å¤ç”¨ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨é»˜è®¤çš„æ¨¡æ¿åå­—ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªlauout.html</p><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=9&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;ChitChat&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    {{ template &quot;content.html&quot; }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>è¿™é‡ŒåµŒå¥—äº†"content.html"æ¨¡æ¿ã€‚é—®é¢˜æ˜¯åªæœ‰å”¯ä¸€ä¸€ä¸ª"content.html"ï¼Œè¿™ä¹ˆå†™é™¤äº†æŠŠä¸€ä¸ªæ–‡ä»¶æ‹†æˆä¸¤ä¸ªæ–‡ä»¶ï¼Œæ— æ³•å¤ç”¨layout.htmlã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥å®šä¹‰æ¨¡æ¿åç§°ï¼Œè€Œä¸æ˜¯ç”¨é»˜è®¤çš„æ–‡ä»¶åï¼š</p><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=9&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;ChitChat&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    {{ template &quot;content&quot; }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>ç„¶ååœ¨index.htmlä¸­å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ä¸ºcontentï¼š</p><pre><code>{{ define &quot;content&quot; }}
    &lt;p class=&quot;lead&quot;&gt;
    &lt;a href=&quot;/thread/new&quot;&gt;Start a thread&lt;/a&gt; or join one below!
    &lt;/p&gt;
{{ end }}
</code></pre><p>parseFilesæ—¶ä¼ å…¥layout.htmlå’Œindex.htmlï¼Œå°±å¯ä»¥å®ç°æ¨¡æ¿åµŒå…¥ã€‚</p><p>åŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªlogin.html,å¹¶åœ¨å…¶ä¸­å®šä¹‰contentï¼š</p><pre><code>{{ define &quot;content&quot; }}
    &lt;a href=&quot;/login&quot;&gt;Loginï¼&lt;/a&gt; 
{{ end }}
</code></pre><p>parseFilesæ—¶ä¼ å…¥layout.htmlå’Œlogin.htmlï¼Œå°±å¯ä»¥å®ç°å¦ä¸€ä¸ªæ¨¡æ¿çš„åµŒå…¥ã€‚</p><p>å¦‚æœæ¨¡æ¿åå­—ä¸åŒï¼Œä¹Ÿå¯ä»¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œå®šä¹‰å¤šä¸ªä¸åŒçš„æ¨¡æ¿ï¼›å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶é‡Œå®šä¹‰åŒåæ¨¡æ¿ã€‚</p><h2 id=å—æ¨¡æ¿>å—æ¨¡æ¿</h2><p>è¿™æ˜¯å¦ä¸€ç§å®šä¹‰æ¨¡æ¿çš„æ–¹æ³•ã€‚ä¸»è¦ç”¨äºç›´æ¥åœ¨ä¸€ä¸ªæ¨¡æ¿ä¸­å®šä¹‰æ–°çš„æ¨¡æ¿ï¼Œå¹¶ä¸”ä½œä¸ºç¼ºçœæ¨¡æ¿ä½¿ç”¨ã€‚</p><pre><code>{{ define &quot;layout&quot; }}
    hello
    {{ block &quot;content&quot; . }}
        &lt;p&gt;someone!&lt;/p&gt;
    {{ end }}
{{ end }}
</code></pre><p>å¦‚æœåœ¨parseFilesæ—¶æ²¡æœ‰ä¼ å…¥é¢å¤–çš„contentæ¨¡æ¿ï¼Œåˆ™ä¼šä½¿ç”¨layouté‡Œå®šä¹‰çš„contentå—ä½œä¸ºç¼ºçœä½¿ç”¨ã€‚</p></section><footer class=article-footer><section class=article-tags><a href=/blogs/tags/go-web/>go-web</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blogs/p/golang%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/><div class=article-details><h2 class=article-title>Golangä¸­çš„åº”ç”¨æµ‹è¯•</h2></div></a></article><article><a href=/blogs/p/golang%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/><div class=article-details><h2 class=article-title>Golangä¸­çš„æ•°æ®å­˜å‚¨</h2></div></a></article><article><a href=/blogs/p/gokit%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8Cconsul%E7%BB%93%E5%90%88%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E5%92%8C%E5%8F%91%E7%8E%B0/><div class=article-details><h2 class=article-title>Gokité¡¹ç›®ç»“æ„å’ŒConsulç»“åˆå®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°</h2></div></a></article><article><a href=/blogs/p/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bgrpc%E7%9A%84%E4%BD%BF%E7%94%A8/><div class=article-details><h2 class=article-title>ä»‹ç»ä¸€ä¸‹grpcçš„ä½¿ç”¨</h2></div></a></article><article><a href=/blogs/p/%E4%B8%80%E4%B8%AA%E4%BD%BF%E7%94%A8go-rpc%E5%BA%93%E5%AE%9E%E7%8E%B0%E7%9A%84rpc%E4%BE%8B%E5%AD%90/><div class=article-details><h2 class=article-title>ä¸€ä¸ªä½¿ç”¨Go Rpcåº“å®ç°çš„RPCä¾‹å­</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 èŒ¶é…’çš„å°ç«™</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›html>å¦‚ä½•è¯»å–æ¨¡ç‰ˆå¹¶è¿”å›HTML</a></li><li><a href=#templateé‡Œçš„åŠ¨ä½œ>templateé‡Œçš„åŠ¨ä½œ</a><ol><li><a href=#1-æ¡ä»¶åŠ¨ä½œ>1. æ¡ä»¶åŠ¨ä½œ</a></li><li><a href=#2-è¿­ä»£åŠ¨ä½œ>2. è¿­ä»£åŠ¨ä½œ</a></li><li><a href=#3-è®¾ç½®åŠ¨ä½œ>3. è®¾ç½®åŠ¨ä½œ</a></li><li><a href=#4-åŒ…å«åŠ¨ä½œ>4. åŒ…å«åŠ¨ä½œ</a></li></ol></li><li><a href=#å‚æ•°>å‚æ•°</a></li><li><a href=#å˜é‡>å˜é‡</a></li><li><a href=#ç®¡é“>ç®¡é“</a></li><li><a href=#å‡½æ•°>å‡½æ•°</a></li><li><a href=#ä¸Šä¸‹æ–‡æ„ŸçŸ¥>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</a><ol><li><a href=#å–æ¶ˆhtmlè½¬ä¹‰>å–æ¶ˆHTMLè½¬ä¹‰</a></li></ol></li><li><a href=#åµŒå¥—æ¨¡æ¿>åµŒå¥—æ¨¡æ¿</a><ol><li><a href=#å—æ¨¡æ¿>å—æ¨¡æ¿</a></li></ol></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blogs/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>